"use strict";(self.webpackChunkbackend_ai_webui_react=self.webpackChunkbackend_ai_webui_react||[]).push([[8456],{61823:(e,n,l)=>{l.d(n,{A:()=>K});var s=l(17898),a=l(23441),i=l(7971),t=l(73e3),o=l(53350);var r,d=l(9189),u=l(22407),c=l(72338),m=l(43622),g=l(50681),p=l(9571),y=l(9769),k=l(50128),h=l(40056),_=l(82919),S=l(52335),v=l(46976),x=l.n(v),F=l(53102),f=l(91788),j=l(22018),A=l(60598);const K=e=>{var n,v,K,C,b,T;let{sessionFrgmt:N,defaultKernelId:L,...I}=e;const w=(0,a.CX)(),{token:E}=p.A.useToken(),D=(0,i.Am)(),R=(0,j.useFragment)(void 0!==r?r:r=l(50029),N),M=(null===R||void 0===R||null===(n=R.kernel_nodes)||void 0===n||null===(v=n.edges)||void 0===v?void 0:v.map((e=>null===e||void 0===e?void 0:e.node)))||[],[U,$]=(0,o.useState)(L||(null===(K=x().find(M,(e=>"main"===(null===e||void 0===e?void 0:e.cluster_role))))||void 0===K?void 0:K.row_id)||(null===(C=M[0])||void 0===C?void 0:C.row_id));(0,o.useEffect)((()=>{!1===I.open&&$(void 0)}),[I.open]);const{data:q,refetch:z,isPending:O,isRefetching:B,dataUpdatedAt:P}=(0,t.nN)({queryKey:["containerLog",null===R||void 0===R?void 0:R.row_id,null===R||void 0===R?void 0:R.access_key,U,I.open],queryFn:async()=>I.open&&null!==R&&void 0!==R&&R.row_id&&null!==R&&void 0!==R&&R.access_key&&U?await w.get_logs(null===R||void 0===R?void 0:R.row_id,null===R||void 0===R?void 0:R.access_key,U,15e3).then((e=>e.result.logs)):"",staleTime:5e3}),[Q,{resetPrevious:G}]=function(e,n){let{initialPrev:l}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=(0,o.useRef)(l),[a,i]=(0,o.useState)({}),t=(0,o.useMemo)(e,n),r=(0,o.useMemo)((()=>s.current),[...n,a]);return(0,o.useEffect)((()=>{s.current=t}),n),[{previous:r,current:t},{resetPrevious:()=>{s.current=l,i({})}}]}((()=>(null===q||void 0===q?void 0:q.split("\n").length)||0),[q]),{md:V}=y.Ay.useBreakpoint(),{t:W}=(0,f.Bd)();return(0,A.jsx)(d.A,{title:(0,A.jsxs)(c.A,{style:{maxWidth:"100%"},gap:"sm",children:[(0,A.jsx)(k.A.Title,{level:4,style:{margin:0,flexShrink:0},children:"Logs"}),R?(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(k.A.Text,{style:{fontWeight:"normal"},ellipsis:!0,children:null===R||void 0===R?void 0:R.name}),(0,A.jsxs)(k.A.Text,{style:{fontWeight:"normal",fontFamily:"monospace"},copyable:{text:null===R||void 0===R?void 0:R.row_id,tooltips:W("button.CopySomething",{name:W("session.SessionId")})},children:["(",V?null===R||void 0===R?void 0:R.row_id:null===R||void 0===R||null===(b=R.row_id.split("-"))||void 0===b?void 0:b[0],")"]})]}):null]}),width:"100%",styles:{header:{width:"100%"},body:{height:"calc(100vh - 100px)",maxHeight:"calc(100vh - 100px)"}},...I,footer:null,destroyOnClose:!0,children:(0,A.jsxs)(c.A,{direction:"column",align:"start",style:{height:"100%"},gap:"sm",children:[(0,A.jsxs)(c.A,{gap:"sm",wrap:"wrap",children:["Kernel Role",(0,A.jsx)(u.A,{value:U,onChange:e=>{$(e),G()},autoSelectOption:!0,options:x().chain(null===R||void 0===R||null===(T=R.kernel_nodes)||void 0===T?void 0:T.edges).sortBy((e=>{var n,l;return`${null===e||void 0===e||null===(n=e.node)||void 0===n?void 0:n.cluster_role} ${null===e||void 0===e||null===(l=e.node)||void 0===l?void 0:l.cluster_idx}`})).map((e=>{var n,l,s,a,i;return{label:(0,A.jsxs)(A.Fragment,{children:[null===e||void 0===e||null===(n=e.node)||void 0===n?void 0:n.cluster_role,"main"!==(null===e||void 0===e||null===(l=e.node)||void 0===l?void 0:l.cluster_role)?null===e||void 0===e||null===(s=e.node)||void 0===s?void 0:s.cluster_idx:"","admin"===D||"superadmin"===D?(0,A.jsxs)(k.A.Text,{style:{fontFamily:"monospace",fontSize:E.fontSizeSM},type:"secondary",children:["(",((null===e||void 0===e||null===(a=e.node)||void 0===a?void 0:a.row_id)||"").substring(0,5),")"]}):null]}),value:null===e||void 0===e||null===(i=e.node)||void 0===i?void 0:i.row_id}})).value()}),(0,A.jsx)(h.A,{type:"vertical"}),(0,A.jsx)(_.A,{title:W("button.Download"),children:(0,A.jsx)(S.Ay,{size:"middle",icon:(0,A.jsx)(F.A,{}),disabled:O||B,onClick:()=>{const e=new Blob([q||""],{type:"text/plain"});(0,s.WN)(e,`${(null===R||void 0===R?void 0:R.name)||"session"}-logs-${U}-${(new Date).toISOString()}.txt`)}})}),(0,A.jsx)(_.A,{title:W("button.Refresh"),children:(0,A.jsx)(S.Ay,{size:"middle",loading:O||B,icon:(0,A.jsx)(m.A,{}),onClick:()=>z()})})]}),(0,A.jsx)("div",{style:{height:"calc(100% - 50px)",alignSelf:"stretch",border:`1px solid ${E.colorBorder}`,overflow:"hidden"},children:(0,A.jsx)(g.jB,{startFollowing:!0,render:e=>{let{follow:n,onScroll:l}=e;return(0,A.jsx)(g.FT,{caseInsensitive:!0,enableSearch:!0,enableSearchNavigation:!0,selectableLines:!0,text:q||"",highlight:Q.previous,extraLines:1,follow:n,onScroll:l})}},P)})]})})}},90857:(e,n,l)=>{l.r(n),l.d(n,{default:()=>a});const s=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"uuid"}],n=[{kind:"Variable",name:"id",variableName:"uuid"}],l={alias:null,args:null,kind:"ScalarField",name:"group_id",storageKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"ConnectedKernelListLegacyQuery",selections:[{alias:"session_for_project_id",args:n,concreteType:"ComputeSession",kind:"LinkedField",name:"compute_session",plural:!1,selections:[l],storageKey:null}],type:"Queries",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"ConnectedKernelListLegacyQuery",selections:[{alias:"session_for_project_id",args:n,concreteType:"ComputeSession",kind:"LinkedField",name:"compute_session",plural:!1,selections:[l,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}]},params:{cacheID:"b8db3f5005362f059f55439e393c1838",id:null,metadata:{},name:"ConnectedKernelListLegacyQuery",operationKind:"query",text:"query ConnectedKernelListLegacyQuery(\n  $uuid: UUID!\n) {\n  session_for_project_id: compute_session(id: $uuid) {\n    group_id\n    id\n  }\n}\n"}}}();s.hash="19ed5dde0fb95d8ff8cfbe9114129348";const a=s},52476:(e,n,l)=>{l.r(n),l.d(n,{default:()=>a});const s=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"id"},{defaultValue:null,kind:"LocalArgument",name:"project_id"}],n=[{kind:"Variable",name:"id",variableName:"id"},{kind:"Variable",name:"project_id",variableName:"project_id"}],l={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"row_id",storageKey:null},a={alias:null,args:null,kind:"ScalarField",name:"cluster_role",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null},t={alias:null,args:null,kind:"ScalarField",name:"status_info",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"agent_id",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"container_id",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"count",storageKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"ConnectedKernelListQuery",selections:[{alias:"session",args:n,concreteType:"ComputeSessionNode",kind:"LinkedField",name:"compute_session_node",plural:!1,selections:[{alias:null,args:null,concreteType:"KernelConnection",kind:"LinkedField",name:"kernel_nodes",plural:!1,selections:[{alias:null,args:null,concreteType:"KernelEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"KernelNode",kind:"LinkedField",name:"node",plural:!1,selections:[l,s,a,i,t,o,r],storageKey:null}],storageKey:null},d],storageKey:null},{args:null,kind:"FragmentSpread",name:"ContainerLogModalFragment"}],storageKey:null}],type:"Queries",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"ConnectedKernelListQuery",selections:[{alias:"session",args:n,concreteType:"ComputeSessionNode",kind:"LinkedField",name:"compute_session_node",plural:!1,selections:[{alias:null,args:null,concreteType:"KernelConnection",kind:"LinkedField",name:"kernel_nodes",plural:!1,selections:[{alias:null,args:null,concreteType:"KernelEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"KernelNode",kind:"LinkedField",name:"node",plural:!1,selections:[l,s,a,i,t,o,r,{alias:null,args:null,kind:"ScalarField",name:"cluster_idx",storageKey:null}],storageKey:null}],storageKey:null},d],storageKey:null},l,s,{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},i,{alias:null,args:null,kind:"ScalarField",name:"access_key",storageKey:null}],storageKey:null}]},params:{cacheID:"2e6cc39dd042b4d260abf65705f92cb5",id:null,metadata:{},name:"ConnectedKernelListQuery",operationKind:"query",text:"query ConnectedKernelListQuery(\n  $id: GlobalIDField!\n  $project_id: UUID!\n) {\n  session: compute_session_node(id: $id, project_id: $project_id) {\n    kernel_nodes {\n      edges {\n        node {\n          id\n          row_id\n          cluster_role\n          status\n          status_info\n          agent_id\n          container_id\n        }\n      }\n      count\n    }\n    ...ContainerLogModalFragment\n    id\n  }\n}\n\nfragment ContainerLogModalFragment on ComputeSessionNode {\n  id\n  row_id\n  name\n  status\n  access_key\n  kernel_nodes {\n    edges {\n      node {\n        id\n        row_id\n        container_id\n        cluster_idx\n        cluster_role\n      }\n    }\n  }\n}\n"}}}();s.hash="d7ddfbcf29d38fad8451d13a176ce279";const a=s},5545:(e,n,l)=>{l.r(n),l.d(n,{default:()=>a});const s={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ContainerCommitModalFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{kind:"RequiredField",field:{alias:null,args:null,kind:"ScalarField",name:"row_id",storageKey:null},action:"NONE",path:"row_id"}],type:"ComputeSessionNode",abstractKey:null,hash:"8bcd294de1ffd3f00f6ec0ed7177c304"},a=s},50029:(e,n,l)=>{l.r(n),l.d(n,{default:()=>a});const s=function(){var e={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},n={alias:null,args:null,kind:"ScalarField",name:"row_id",storageKey:null};return{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ContainerLogModalFragment",selections:[e,{kind:"RequiredField",field:n,action:"NONE",path:"row_id"},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"access_key",storageKey:null},{alias:null,args:null,concreteType:"KernelConnection",kind:"LinkedField",name:"kernel_nodes",plural:!1,selections:[{alias:null,args:null,concreteType:"KernelEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"KernelNode",kind:"LinkedField",name:"node",plural:!1,selections:[e,n,{alias:null,args:null,kind:"ScalarField",name:"container_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cluster_idx",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cluster_role",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],type:"ComputeSessionNode",abstractKey:null}}();s.hash="59dda81185d3d874cd635adcae2ae9d4";const a=s},33589:(e,n,l)=>{l.r(n),l.d(n,{default:()=>a});const s={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"EditableSessionNameFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"row_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"priority",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"user_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null}],type:"ComputeSessionNode",abstractKey:null,hash:"9c053b92b568a9b132f7615d1869f32b"},a=s},93178:(e,n,l)=>{l.r(n),l.d(n,{default:()=>a});const s=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"input"}],n=[{alias:null,args:[{kind:"Variable",name:"input",variableName:"input"}],concreteType:"ModifyComputeSessionPayload",kind:"LinkedField",name:"modify_compute_session",plural:!1,selections:[{alias:null,args:null,concreteType:"ComputeSessionNode",kind:"LinkedField",name:"item",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"EditableSessionNameMutation",selections:n,type:"Mutations",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"EditableSessionNameMutation",selections:n},params:{cacheID:"bea4b6405958ab3b9796129b5807d0fa",id:null,metadata:{},name:"EditableSessionNameMutation",operationKind:"mutation",text:"mutation EditableSessionNameMutation(\n  $input: ModifyComputeSessionInput!\n) {\n  modify_compute_session(input: $input) {\n    item {\n      id\n      name\n    }\n  }\n}\n"}}}();s.hash="92003994eaa19ceec71d4fe2efb299cd";const a=s},79825:(e,n,l)=>{l.r(n),l.d(n,{default:()=>a});const s={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"SessionActionButtonsFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{kind:"RequiredField",field:{alias:null,args:null,kind:"ScalarField",name:"row_id",storageKey:null},action:"NONE",path:"row_id"},{alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"access_key",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"service_ports",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"commit_status",storageKey:null},{args:null,kind:"FragmentSpread",name:"TerminateSessionModalFragment"},{args:null,kind:"FragmentSpread",name:"ContainerLogModalFragment"},{args:null,kind:"FragmentSpread",name:"ContainerCommitModalFragment"}],type:"ComputeSessionNode",abstractKey:null,hash:"691b7c3c1673640d97620822f4fff09f"},a=s},73921:(e,n,l)=>{l.r(n),l.d(n,{default:()=>a});const s={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"SessionIdleChecksFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"idle_checks",storageKey:null}],type:"ComputeSession",abstractKey:null,hash:"d2bf721ec94f22eba99980925b3f9656"},a=s},7281:(e,n,l)=>{l.r(n),l.d(n,{default:()=>a});const s={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"SessionIdleChecksNodeFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"idle_checks",storageKey:null}],type:"ComputeSessionNode",abstractKey:null,hash:"09a1dd685c8942ebb5c69e6dddaf6da0"},a=s},15934:(e,n,l)=>{l.r(n),l.d(n,{default:()=>a});const s={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"SessionTypeTagFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null}],type:"ComputeSessionNode",abstractKey:null,hash:"6d4ab2b738125ee81d47483324695349"},a=s},58456:(e,n,l)=>{l.d(n,{A:()=>je});var s=l(23441),a=l(50332),i=l(32715),t=l(72375),o=l(7971),r=l(81530),d=l(94132),u=l(8699),c=l(91238),m=l(72338),g=l(53350);const p=e=>{let{children:n}=e;const l=g.Children.only(n),s=l.props.open,[a,i]=(0,g.useState)(s);if((0,g.useLayoutEffect)((()=>{s&&i(!0)}),[s]),!a)return null;const t=l.props.afterClose;return g.cloneElement(l,{afterClose:function(){t&&t(...arguments),i(!1)}})};var y,k,h=l(61823),_=l(50128),S=l(82919),v=l(52335),x=l(24798),F=l(46976),f=l.n(F),j=l(33879),A=l(91788),K=l(22018),C=l(60598);const b={PREPARING:"blue",BUILDING:"blue",PULLING:"blue",PREPARED:"blue",CREATING:"blue",PENDING:"green",SCHEDULED:"green",RUNNING:"green",RESTARTING:"green",RESIZING:"green",SUSPENDED:"green",TERMINATING:"default",TERMINATED:"default",CANCELLED:"default",ERROR:"red"},T=e=>{let{id:n,fetchKey:s}=e;const{t:a}=(0,A.Bd)(),i=(0,r.hd)(),[o,d]=(0,g.useState)(),{session_for_project_id:F}=(0,K.useLazyLoadQuery)(void 0!==y?y:y=l(90857),{uuid:n},{fetchPolicy:"network-only"}),{session:T}=(0,K.useLazyLoadQuery)(void 0!==k?k:k=l(52476),{id:(0,t.wc)("ComputeSessionNode",n),project_id:(null===F||void 0===F?void 0:F.group_id)||i.id},{fetchPolicy:"network-only",fetchKey:s}),N=null===T||void 0===T?void 0:T.kernel_nodes,L=(0,t.LY)([{title:"#",fixed:"left",render:(e,n,l)=>l+1,showSorterTooltip:!1,rowScope:"row"},{title:a("kernel.KernelId"),fixed:"left",dataIndex:"row_id",render:e=>(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(_.A.Text,{copyable:!0,ellipsis:!0,children:e}),(0,C.jsx)(S.A,{title:a("session.SeeContainerLogs"),children:(0,C.jsx)(v.Ay,{icon:(0,C.jsx)(j.A,{}),type:"link",onClick:()=>{d(e)}})})]})},{title:a("kernel.Role"),dataIndex:"cluster_role",render:e=>(0,C.jsx)(x.A,{children:e})},{title:a("kernel.Status"),dataIndex:"status",render:(e,n)=>{var l;return(0,C.jsx)(C.Fragment,{children:""!==(null===n||void 0===n?void 0:n.status_info)?(0,C.jsx)(c.A,{values:[{label:e,color:f().get(b,e)},{label:null===n||void 0===n?void 0:n.status_info,color:f().get(b,null!==(l=null===n||void 0===n?void 0:n.status_info)&&void 0!==l?l:"")}]}):(0,C.jsx)(x.A,{color:f().get(b,e),children:e})})}},{title:a("kernel.ContainerId"),dataIndex:"container_id",onCell:()=>({style:{maxWidth:250}}),render:e=>(0,C.jsx)(_.A.Text,{copyable:!0,ellipsis:!0,children:e})},{title:a("kernel.AgentId"),dataIndex:"agent_id",render:e=>(0,C.jsx)(_.A.Text,{copyable:!0,children:e})}]);return(0,C.jsxs)(m.A,{direction:"column",align:"stretch",gap:"sm",children:[(0,C.jsx)(u.A,{bordered:!0,rowKey:"id",scroll:{x:"max-content"},columns:L,dataSource:(0,t.tS)(null===N||void 0===N?void 0:N.edges.map((e=>null===e||void 0===e?void 0:e.node))),style:{width:"100%"},pagination:!1}),(0,C.jsx)(p,{children:(0,C.jsx)(h.A,{open:!!o,sessionFrgmt:T||null,defaultKernelId:o,onCancel:()=>{d(void 0)}})})]})};var N,L,I=l(60661),w=l(9571),E=l(13170),D=l(83978),R=l(96365),M=l(7824);const U=e=>{let{component:n=R.A,sessionFrgmt:s,editable:a,style:i,...t}=e;const r=(0,K.useFragment)(void 0!==N?N:N=l(33589),s),[d,u]=(0,g.useState)(r.name),[c]=(0,o.U6)(),[m,p]=(0,K.useMutation)(void 0!==L?L:L=l(93178)),{t:y}=(0,A.Bd)(),{token:k}=w.A.useToken(),[h,_]=(0,g.useState)(!1),S=!["RESTARTING","PREPARING","PREPARED","CREATING","PULLING"].includes(r.status||""),v=a&&c.uuid===r.user_id&&S;return(0,C.jsxs)(C.Fragment,{children:[(!h||p)&&(0,C.jsx)(n,{editable:!(!v||p)&&{onStart:()=>{_(!0)},triggerType:["icon","text"]},copyable:!0,style:{...i,color:p?k.colorTextTertiary:null===i||void 0===i?void 0:i.color},...t,children:p?d:r.name}),h&&!p&&(0,C.jsx)(E.A,{onFinish:e=>{_(!1),u(e.sessionName),m({variables:{input:{id:r.id,name:e.sessionName}},onCompleted(e,n){},onError(e){}})},initialValues:{sessionName:r.name},style:{flex:1},children:(0,C.jsx)(E.A.Item,{name:"sessionName",rules:(0,I.j)(y),style:{margin:0},children:(0,C.jsx)(D.A,{size:"large",suffix:(0,C.jsx)(M.A,{style:{fontSize:"0.8em",color:k.colorTextTertiary}}),autoFocus:!0,onKeyDown:e=>{"Escape"===e.key&&_(!1)}})})})]})};var $,q=l(25905),z=l(9189),O=l(8227),B=l(40056);const P=e=>{let{sessionFrgmt:n,onRequestClose:a,...i}=e;const{t:t}=(0,A.Bd)(),o=(0,g.useRef)(null),r=(0,s.CX)(),{upsertNotification:d}=(0,q.js)(),[u,c]=(0,g.useState)(!1),p=(0,K.useFragment)(void 0!==$?$:$=l(5545),n);return(0,C.jsx)(z.A,{title:t("session.CommitSession"),onOk:()=>(()=>{var e;c(!0),null===o||void 0===o||null===(e=o.current)||void 0===e||e.validateFields().then((e=>{var n;r.computeSession.convertSessionToImage(null!==(n=null===p||void 0===p?void 0:p.name)&&void 0!==n?n:"",e.imageName).then((e=>{a(),d({key:"commitSession:"+(null===p||void 0===p?void 0:p.name),backgroundTask:{taskId:e.task_id,status:"pending",onChange:{pending:t("session.CommitOnGoing"),resolved:t("session.CommitFinished"),rejected:t("session.CommitFailed")}},duration:0,message:"commitSession: "+(null===p||void 0===p?void 0:p.name),open:!0})})).catch((e=>{throw null!==e&&void 0!==e&&e.message?new Error(e.message):e})).finally((()=>{c(!1)}))})).catch((e=>{console.log(e)}))})(),okButtonProps:{loading:u},onCancel:a,...i,destroyOnClose:!0,children:(0,C.jsxs)(m.A,{direction:"column",gap:"xs",align:"stretch",style:{overflow:"hidden"},children:[(0,C.jsx)(_.A.Text,{children:t("session.DescCommitSession")}),(0,C.jsxs)(O.A,{bordered:!0,size:"small",column:1,children:[(0,C.jsx)(O.A.Item,{label:t("session.SessionName"),children:null===p||void 0===p?void 0:p.name}),(0,C.jsx)(O.A.Item,{label:t("session.SessionId"),children:null===p||void 0===p?void 0:p.row_id})]}),(0,C.jsx)(B.A,{style:{marginTop:12,marginBottom:12}}),(0,C.jsx)(E.A,{ref:o,children:(0,C.jsx)(E.A.Item,{label:t("session.CommitImageName"),name:"imageName",required:!0,rules:[{required:!0},{min:4,max:32},{pattern:/^[a-zA-Z0-9-_.]+$/,message:t("session.Validation.EnterValidSessionName")}],children:(0,C.jsx)(D.A,{placeholder:t("inputLimit.4to32chars")})})})]})})};var Q,G=l(26059),V=l(32582),W=l(10566),X=l(15517);const H=e=>!["TERMINATED","CANCELLED"].includes((null===e||void 0===e?void 0:e.status)||""),J=e=>{const{t:n}=(0,A.Bd)(),{token:a}=w.A.useToken(),i={runTerminal:e=>{globalThis.appLauncher.runTerminal(e)},showLauncher:e=>{}},t=(0,s.CX)(),o=(0,K.useFragment)(void 0!==Q?Q:Q=l(79825),e.sessionFrgmt),[r,d]=(0,g.useState)(!1),[u,c]=(0,g.useState)(!1),[m,p]=(0,g.useState)(!1);return o&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(S.A,{title:n("session.ExecuteTerminalApp"),children:(0,C.jsx)(v.Ay,{disabled:!H(o),icon:(0,C.jsx)(W.A,{}),onClick:()=>{i.runTerminal(null===o||void 0===o?void 0:o.row_id)}})}),(0,C.jsx)(G.A,{sessionFrgmts:[o],open:r,onRequestClose:()=>{d(!1)}}),(0,C.jsx)(S.A,{title:n("session.SeeContainerLogs"),children:(0,C.jsx)(v.Ay,{icon:(0,C.jsx)(j.A,{}),onClick:()=>{c(!0)}})}),(0,C.jsx)(h.A,{sessionFrgmt:o,open:u,onCancel:()=>{c(!1)}}),(0,C.jsx)(S.A,{title:n("session.RequestContainerCommit"),children:(0,C.jsx)(v.Ay,{disabled:(!t.supports("image-commit")||!t._config.enableContainerCommit)&&"system"!==o.type,icon:(0,C.jsx)(V.A,{style:{fontSize:14}}),onClick:()=>{p(!0)}})}),(0,C.jsx)(P,{sessionFrgmt:o,open:m,onRequestClose:()=>p(!1)}),(0,C.jsx)(S.A,{title:n("session.TerminateSession"),children:(0,C.jsx)(v.Ay,{disabled:!H(o),icon:(0,C.jsx)(X.A,{color:H(o)?a.colorError:void 0}),onClick:()=>{d(!0)}})})]})};var Z,Y,ee=l(30351);function ne(e){let n,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!l){const[n,l]=e;return n<2*l?"red":n<10*l?"orange":"green"}return"and"===l&&f().every(e,(e=>{let[l,s]=e;return l<Math.min(2*s,s+5)?(n="red",!0):l<Math.min(10*s,s+10)?(n="orange",!0):(n="green",!0)})),"or"===l&&f().some(e,(e=>{let[l,s]=e;return l<Math.min(2*s,s+5)?(n="red",!0):l<Math.min(10*s,s+10)?(n="orange",!0):(n="green",!0)})),n}function le(e,n){return"remaining"===n?!e.remaining||e.remaining<3600?"red":e.remaining<14400?"orange":"green":e.extra&&(!e.remaining||e.remaining<14400)?ne(e.extra.resources,e.extra.thresholds_check_operator):void 0}const se=e=>{let{sessionNodeFrgmt:n=null,sessionFrgmt:s=null,direction:a="row"}=e;const{t:i}=(0,A.Bd)(),{token:r}=w.A.useToken(),{mergedResourceSlots:d}=(0,o.Hv)(),u=(0,K.useFragment)(void 0!==Z?Z:Z=l(7281),n),g=(0,K.useFragment)(void 0!==Y?Y:Y=l(73921),s),p=JSON.parse((null===u||void 0===u?void 0:u.idle_checks)||(null===g||void 0===g?void 0:g.idle_checks)||"{}"),y=e=>i("network_timeout"===e?"session.NetworkIdleTimeout":"session_lifetime"===e?"session.MaxSessionLifetime":"session.UtilizationIdleTimeout");return(0,C.jsx)(m.A,{direction:a,align:"stretch",gap:"sm",children:f().map(p,((e,n)=>{var l,s;return e.remaining?(0,C.jsxs)(m.A,{style:{flex:1},direction:"column",align:"stretch",children:[(0,C.jsxs)(m.A,{gap:"xxs",children:[(0,C.jsx)(_.A.Text,{children:y(n)}),"utilization"===n&&(0,C.jsx)(S.A,{title:(0,C.jsxs)(C.Fragment,{children:[`${i("session.Utilization")} / ${i("session.Threshold")} (%)`,(0,C.jsx)("br",{}),f().map(null===(l=e.extra)||void 0===l?void 0:l.resources,((e,n)=>{var l;const s=["cpu_util","mem"].includes(n)?f().split(n,"_")[0]:f().split(n,"_")[0]+".device",[a,i]=e;return(0,C.jsxs)(m.A,{gap:"xs",children:[(0,C.jsx)(_.A.Text,{style:{color:r.colorWhite},children:`${null===d||void 0===d||null===(l=d[s])||void 0===l?void 0:l.human_readable_name}:`}),(0,C.jsx)(_.A.Text,{style:{color:ne(e)},children:`${a>=0?(0,t.Z1)(a,1):"-"} / ${i}`}),(0,C.jsx)("br",{})]},n)}))]}),children:(0,C.jsx)(ee.A,{style:{color:r.colorTextSecondary,cursor:"pointer"}})})]}),e.remaining>=0?(0,C.jsx)(c.A,{values:[{label:(s=e.remaining_time_type,i("expire_after"===s?"session.ExpiresAfter":"session.GracePeriod")),color:le(e,"utilization"===n?"utilization":"remaining")},{label:(0,t.bB)((new Date).toISOString(),new Date((new Date).getTime()+1e3*(e.remaining||0)).toISOString()),color:le(e,"utilization"===n?"utilization":"remaining")}]}):(0,C.jsx)(_.A.Text,{type:"danger",children:i("session.TimeoutExceeded")})]},n):null}))})};var ae,ie=l(61207),te=l(5415);const oe={INTERACTIVE:"green",BATCH:"darkgreen",INFERENCE:"blue"},re=e=>{let{sessionFrgmt:n}=e;const s=(0,K.useFragment)(void 0!==ae?ae:ae=l(15934),n);return(0,C.jsx)(x.A,{color:f().get(oe,f().toUpper(s.type||"")),children:f().toUpper(s.type||"")})};var de=l(75863);const ue=e=>{let{...n}=e;const{t:l}=(0,A.Bd)(),{token:s}=w.A.useToken();return(0,C.jsxs)(z.A,{title:l("session.IdleChecks"),footer:null,width:700,...n,children:[(0,C.jsx)(_.A.Text,{children:l("session.IdleChecksDesc")}),(0,C.jsx)(_.A.Title,{level:5,children:l("session.MaxSessionLifetime")}),(0,C.jsx)("p",{children:l("session.MaxSessionLifetimeDesc")}),(0,C.jsx)(_.A.Title,{level:5,children:l("session.NetworkIdleTimeout")}),(0,C.jsx)("p",{children:l("session.NetworkIdleTimeoutDesc")}),(0,C.jsx)(_.A.Title,{level:5,children:l("session.UtilizationIdleTimeout")}),(0,C.jsx)("p",{children:l("session.UtilizationIdleTimeoutDesc")}),(0,C.jsxs)(m.A,{direction:"column",align:"stretch",style:{marginLeft:s.marginMD},children:[(0,C.jsx)(_.A.Title,{level:5,style:{margin:0},children:l("session.GracePeriod")}),(0,C.jsx)("p",{children:l("session.GracePeriodDesc")}),(0,C.jsx)(_.A.Title,{level:5,style:{margin:0},children:l("session.UtilizationThreshold")}),(0,C.jsx)("p",{children:l("session.UtilizationThresholdDesc")})]})]})};var ce,me,ge=l(90184),pe=l(95950),ye=l(2759),ke=l(38639),he=l(9769),_e=l(58325),Se=l(91867),ve=l(9542);const xe=e=>{var n;let{id:a,fetchKey:u}=e;const{t:c}=(0,A.Bd)(),{token:p}=w.A.useToken(),{md:y}=he.Ay.useBreakpoint(),{open:k}=(0,de.useFolderExplorerOpener)(),h=(0,r.hd)(),F=(0,o.Am)(),j=(0,s.CX)(),[b,N]=(0,g.useState)(!1),{session_for_project_id:L}=(0,K.useLazyLoadQuery)(void 0!==ce?ce:ce=l(66427),{uuid:a},{fetchPolicy:"network-only"}),{session:I,legacy_session:E}=(0,K.useLazyLoadQuery)(void 0!==me?me:me=l(4078),{id:(0,t.wc)("ComputeSessionNode",a),uuid:a,project_id:(null===L||void 0===L?void 0:L.group_id)||h.id},{fetchPolicy:"network-only",fetchKey:u}),D=(null===E||void 0===E?void 0:E.image)&&(null===E||void 0===E?void 0:E.architecture)&&E.image+"@"+E.architecture,R=JSON.parse((null===I||void 0===I?void 0:I.idle_checks)||(null===E||void 0===E?void 0:E.idle_checks)||"{}"),M=f().min(f().values(R).map((e=>e.remaining)).filter(Boolean)),$=j._config.showKernelList;return I?(0,C.jsxs)(m.A,{direction:"column",gap:"lg",align:"stretch",children:[(null===L||void 0===L?void 0:L.group_id)!==h.id&&(0,C.jsx)(_e.A,{message:c("session.NotInProject"),type:"warning",showIcon:!0}),M&&M<3600&&(0,C.jsx)(_e.A,{message:c("session.IdleCheckExpirationWarning"),type:"warning",showIcon:!0}),(0,C.jsxs)(m.A,{direction:"column",gap:"sm",align:"stretch",children:[(0,C.jsxs)(m.A,{direction:"row",justify:"between",align:"start",style:{alignSelf:"stretch"},gap:"sm",children:[(0,C.jsx)(U,{sessionFrgmt:I,component:ve.A,level:3,style:{margin:0,color:["TERMINATED","CANCELLED"].includes(I.status||"")?p.colorTextTertiary:void 0},editable:!["TERMINATED","CANCELLED"].includes(I.status||"")}),(0,C.jsx)(v.Ay.Group,{size:"large",children:(0,C.jsx)(J,{sessionFrgmt:I})})]}),(0,C.jsxs)(O.A,{bordered:!0,column:y?2:1,children:[(0,C.jsx)(O.A.Item,{label:c("session.SessionId"),span:y?2:1,children:(0,C.jsx)(_.A.Text,{copyable:!0,style:{fontFamily:"monospace"},children:I.row_id})}),("admin"===F||"superadmin"===F)&&(0,C.jsx)(O.A.Item,{label:c("credential.UserID"),span:y?2:1,children:null===E||void 0===E?void 0:E.user_email}),(0,C.jsx)(O.A.Item,{label:c("session.Status"),contentStyle:{display:"flex",gap:p.marginSM},children:(0,C.jsx)(te.A,{sessionFrgmt:I,showInfo:!0})}),(0,C.jsx)(O.A.Item,{label:c("session.SessionType"),children:(0,C.jsx)(re,{sessionFrgmt:I})}),(0,C.jsx)(O.A.Item,{label:c("session.launcher.Environments"),children:D?(0,C.jsxs)(m.A,{gap:"sm",children:[(0,C.jsx)(ge.A,{image:D}),(0,C.jsx)(m.A,{children:(0,C.jsx)(i.Ay,{image:D})})]}):"-"}),(0,C.jsx)(O.A.Item,{label:c("session.launcher.MountedFolders"),children:j.supports("vfolder-mounts")?f().map(f().zip(null===E||void 0===E?void 0:E.mounts,null===I||void 0===I?void 0:I.vfolder_mounts),(e=>{const[n,l]=e;return(0,C.jsx)(v.Ay,{type:"link",size:"small",icon:(0,C.jsx)(ye.A,{}),onClick:()=>{k(null!==l&&void 0!==l?l:"")},children:n},l)})):null===E||void 0===E||null===(n=E.mounts)||void 0===n?void 0:n.join(", ")}),(0,C.jsx)(O.A.Item,{label:c("session.launcher.ResourceAllocation"),children:(0,C.jsxs)(m.A,{gap:"sm",wrap:"wrap",children:[(0,C.jsx)(S.A,{title:c("session.ResourceGroup"),children:(0,C.jsx)(x.A,{children:I.scaling_group})}),(0,C.jsx)(d.ResourceNumbersOfSession,{resource:JSON.parse(I.requested_slots||"{}")})]})}),(0,C.jsx)(O.A.Item,{label:c("session.Agent"),children:I.agent_ids||"-"}),(0,C.jsx)(O.A.Item,{label:c("session.Reservation"),span:y?2:1,children:(0,C.jsx)(m.A,{gap:"xs",wrap:"wrap",children:(0,C.jsx)(ie.A,{sessionFrgmt:I})})}),j.supports("idle-checks-gql")&&"RUNNING"===I.status&&M?(0,C.jsx)(O.A.Item,{label:(0,C.jsxs)(m.A,{gap:"xxs",children:[c("session.IdleChecks"),(0,C.jsx)(S.A,{title:c("button.ClickForMoreDetails"),children:(0,C.jsx)(ke.A,{style:{cursor:"pointer"},onClick:()=>N(!0)})})]}),span:y?2:1,children:(0,C.jsx)(se,{sessionNodeFrgmt:I,sessionFrgmt:E,direction:y?"row":"column"})}):null,(0,C.jsx)(O.A.Item,{label:"Resource Usage",span:y?2:1,children:(0,C.jsx)(pe.A,{sessionFrgmt:I})})]})]}),$?(0,C.jsx)(g.Suspense,{fallback:(0,C.jsx)(Se.A,{}),children:(0,C.jsxs)(m.A,{direction:"column",gap:"sm",align:"stretch",children:[(0,C.jsx)(_.A.Title,{level:4,style:{margin:0},children:c("kernel.Kernels")}),(0,C.jsx)(T,{id:a,fetchKey:u})]})}):null,(0,C.jsx)(ue,{open:b,onCancel:()=>N(!1)})]}):(0,C.jsx)(_e.A,{showIcon:!0,message:c("session.SessionNotFound"),type:"error",description:a})};var Fe=l(43622),fe=l(43710);const je=e=>{let{sessionId:n,...l}=e;const{t:i}=(0,A.Bd)();(0,s.CX)();const[t,o]=(0,g.useTransition)(),[r,d]=(0,s.Tw)("first");return(0,a.$)((()=>{o((()=>{d()}))}),7e3),(0,C.jsx)(fe.A,{title:i("session.SessionInfo"),width:800,keyboard:!1,...l,open:!!n,onClose:e=>{var n;null===(n=l.onClose)||void 0===n||n.call(l,e)},extra:(0,C.jsx)(S.A,{title:i("button.Refresh"),children:(0,C.jsx)(v.Ay,{loading:t,icon:(0,C.jsx)(Fe.A,{}),onClick:()=>{o((()=>{d()}))}})}),children:(0,C.jsx)(g.Suspense,{fallback:(0,C.jsx)(Se.A,{}),children:n&&(0,C.jsx)(xe,{id:n,fetchKey:r})})})}},66427:(e,n,l)=>{l.r(n),l.d(n,{default:()=>a});const s=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"uuid"}],n=[{kind:"Variable",name:"id",variableName:"uuid"}],l={alias:null,args:null,kind:"ScalarField",name:"group_id",storageKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"SessionDetailContentLegacyQuery",selections:[{alias:"session_for_project_id",args:n,concreteType:"ComputeSession",kind:"LinkedField",name:"compute_session",plural:!1,selections:[l],storageKey:null}],type:"Queries",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"SessionDetailContentLegacyQuery",selections:[{alias:"session_for_project_id",args:n,concreteType:"ComputeSession",kind:"LinkedField",name:"compute_session",plural:!1,selections:[l,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}]},params:{cacheID:"1c0255a2836eb7e492954c7ab0212c7f",id:null,metadata:{},name:"SessionDetailContentLegacyQuery",operationKind:"query",text:"query SessionDetailContentLegacyQuery(\n  $uuid: UUID!\n) {\n  session_for_project_id: compute_session(id: $uuid) {\n    group_id\n    id\n  }\n}\n"}}}();s.hash="d6a0dfbccdec8393f1a058dab48a0757";const a=s},4078:(e,n,l)=>{l.r(n),l.d(n,{default:()=>a});const s=function(){var e={defaultValue:null,kind:"LocalArgument",name:"id"},n={defaultValue:null,kind:"LocalArgument",name:"project_id"},l={defaultValue:null,kind:"LocalArgument",name:"uuid"},s=[{kind:"Variable",name:"id",variableName:"id"},{kind:"Variable",name:"project_id",variableName:"project_id"}],a={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"row_id",storageKey:null},t={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"project_id",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"user_id",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"resource_opts",storageKey:null},u={alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null},c={alias:null,args:null,kind:"ScalarField",name:"vfolder_mounts",storageKey:null},m={alias:null,args:null,kind:"ScalarField",name:"created_at",storageKey:null},g={alias:null,args:null,kind:"ScalarField",name:"terminated_at",storageKey:null},p={alias:null,args:null,kind:"ScalarField",name:"scaling_group",storageKey:null},y={alias:null,args:null,kind:"ScalarField",name:"agent_ids",storageKey:null},k={alias:null,args:null,kind:"ScalarField",name:"requested_slots",storageKey:null},h={alias:null,args:null,kind:"ScalarField",name:"idle_checks",storageKey:null},_=[{kind:"Variable",name:"id",variableName:"uuid"}],S={alias:null,args:null,kind:"ScalarField",name:"image",storageKey:null},v={alias:null,args:null,kind:"ScalarField",name:"mounts",storageKey:null},x={alias:null,args:null,kind:"ScalarField",name:"user_email",storageKey:null},F={alias:null,args:null,kind:"ScalarField",name:"architecture",storageKey:null};return{fragment:{argumentDefinitions:[e,n,l],kind:"Fragment",metadata:null,name:"SessionDetailContentQuery",selections:[{alias:"session",args:s,concreteType:"ComputeSessionNode",kind:"LinkedField",name:"compute_session_node",plural:!1,selections:[a,i,t,o,r,d,u,c,{kind:"RequiredField",field:m,action:"NONE",path:"session.created_at"},g,p,y,k,h,{args:null,kind:"FragmentSpread",name:"SessionStatusTagFragment"},{args:null,kind:"FragmentSpread",name:"SessionActionButtonsFragment"},{args:null,kind:"FragmentSpread",name:"SessionTypeTagFragment"},{args:null,kind:"FragmentSpread",name:"EditableSessionNameFragment"},{args:null,kind:"FragmentSpread",name:"SessionReservationFragment"},{args:null,kind:"FragmentSpread",name:"ContainerLogModalFragment"},{args:null,kind:"FragmentSpread",name:"SessionUsageMonitorFragment"},{args:null,kind:"FragmentSpread",name:"ContainerCommitModalFragment"},{args:null,kind:"FragmentSpread",name:"SessionIdleChecksNodeFragment"}],storageKey:null},{alias:"legacy_session",args:_,concreteType:"ComputeSession",kind:"LinkedField",name:"compute_session",plural:!1,selections:[S,v,x,F,h,{args:null,kind:"FragmentSpread",name:"SessionIdleChecksFragment"}],storageKey:null}],type:"Queries",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[e,l,n],kind:"Operation",name:"SessionDetailContentQuery",selections:[{alias:"session",args:s,concreteType:"ComputeSessionNode",kind:"LinkedField",name:"compute_session_node",plural:!1,selections:[a,i,t,o,r,d,u,c,m,g,p,y,k,h,{alias:null,args:null,kind:"ScalarField",name:"status_info",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"access_key",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"service_ports",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"commit_status",storageKey:null},{alias:null,args:null,concreteType:"KernelConnection",kind:"LinkedField",name:"kernel_nodes",plural:!1,selections:[{alias:null,args:null,concreteType:"KernelEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"KernelNode",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"container_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"agent_id",storageKey:null},a,i,{alias:null,args:null,kind:"ScalarField",name:"cluster_idx",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cluster_role",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"live_stat",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"occupied_slots",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"priority",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"starts_at",storageKey:null}],storageKey:null},{alias:"legacy_session",args:_,concreteType:"ComputeSession",kind:"LinkedField",name:"compute_session",plural:!1,selections:[S,v,x,F,h,a],storageKey:null}]},params:{cacheID:"e0308612a16a49c1d3f8af5b039313ca",id:null,metadata:{},name:"SessionDetailContentQuery",operationKind:"query",text:'query SessionDetailContentQuery(\n  $id: GlobalIDField!\n  $uuid: UUID!\n  $project_id: UUID!\n) {\n  session: compute_session_node(id: $id, project_id: $project_id) {\n    id\n    row_id\n    name\n    project_id\n    user_id\n    resource_opts\n    status\n    vfolder_mounts\n    created_at\n    terminated_at\n    scaling_group\n    agent_ids\n    requested_slots\n    idle_checks @since(version: "24.12.0")\n    ...SessionStatusTagFragment\n    ...SessionActionButtonsFragment\n    ...SessionTypeTagFragment\n    ...EditableSessionNameFragment\n    ...SessionReservationFragment\n    ...ContainerLogModalFragment\n    ...SessionUsageMonitorFragment\n    ...ContainerCommitModalFragment\n    ...SessionIdleChecksNodeFragment\n  }\n  legacy_session: compute_session(id: $uuid) {\n    image\n    mounts\n    user_email\n    architecture\n    idle_checks @since(version: "24.09.0")\n    ...SessionIdleChecksFragment\n    id\n  }\n}\n\nfragment ContainerCommitModalFragment on ComputeSessionNode {\n  id\n  name\n  row_id\n}\n\nfragment ContainerLogModalFragment on ComputeSessionNode {\n  id\n  row_id\n  name\n  status\n  access_key\n  kernel_nodes {\n    edges {\n      node {\n        id\n        row_id\n        container_id\n        cluster_idx\n        cluster_role\n      }\n    }\n  }\n}\n\nfragment EditableSessionNameFragment on ComputeSessionNode {\n  id\n  row_id\n  name\n  priority\n  user_id\n  status\n}\n\nfragment SessionActionButtonsFragment on ComputeSessionNode {\n  id\n  row_id\n  type\n  status\n  access_key\n  service_ports\n  commit_status\n  ...TerminateSessionModalFragment\n  ...ContainerLogModalFragment\n  ...ContainerCommitModalFragment\n}\n\nfragment SessionIdleChecksFragment on ComputeSession {\n  id\n  idle_checks @since(version: "24.09.0")\n}\n\nfragment SessionIdleChecksNodeFragment on ComputeSessionNode {\n  id\n  idle_checks @since(version: "24.12.0")\n}\n\nfragment SessionReservationFragment on ComputeSessionNode {\n  id\n  created_at\n  starts_at\n  terminated_at\n}\n\nfragment SessionStatusTagFragment on ComputeSessionNode {\n  id\n  name\n  status\n  status_info\n}\n\nfragment SessionTypeTagFragment on ComputeSessionNode {\n  type\n}\n\nfragment SessionUsageMonitorFragment on ComputeSessionNode {\n  kernel_nodes {\n    edges {\n      node {\n        live_stat\n        occupied_slots\n        id\n      }\n    }\n  }\n}\n\nfragment TerminateSessionModalFragment on ComputeSessionNode {\n  id\n  row_id\n  name\n  scaling_group\n  kernel_nodes {\n    edges {\n      node {\n        container_id\n        agent_id\n        id\n      }\n    }\n  }\n}\n'}}}();s.hash="93950b0e90c5428c5cac947b9590f657";const a=s},17898:(e,n,l)=>{l.d(n,{RM:()=>o,WN:()=>t});var s=l(46976),a=l.n(s);function i(e){return null===e||void 0===e?"":"number"===typeof e||"boolean"===typeof e?String(e):`"${(e=a().isString(e)?e:JSON.stringify(e)).replace(/"/g,'""')}"`}const t=(e,n)=>{const l=URL.createObjectURL(e),s=document.createElement("a");s.href=l,s.download=n,s.click(),URL.revokeObjectURL(l)},o=(e,n,l)=>{const s=((e,n)=>{const l=a().map(e,(e=>a().omit(e,"__fragments","__fragmentOwner","__id"))),s=a().keys(l[0]),t=a().map(l,(e=>a().map(e,((e,l)=>{var s;return null!==n&&void 0!==n&&n[l]&&(null===(s=n[l])||void 0===s?void 0:s.call(n,e))||e})))).map((e=>e.map(i).join(","))).join("\n");return[s.map(i).join(","),t].join("\n")})(e,l),o=new Blob([s],{type:"text/csv"});t(o,`${n}.csv`)}}}]);
//# sourceMappingURL=8456.67dbf690.chunk.js.map