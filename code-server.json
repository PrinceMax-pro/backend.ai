{
    "prestart": [
      {
        "action": "mkdir",
        "args": {
          "path": "/home/work/.local/lib"
        }
      },
      {
        "action": "mkdir",
        "args": {
          "path": "/home/work/.local/bin"
        }
      },
      {
        "action": "run_command",
        "args": {
          "command": [
            "tar -zxf {mount_path}/code-server-{distro}-{arch}.tar.gz --directory /home/work/",
            "mv /home/work/code-server-{distro}-{arch} /home/work/.local/lib/code-server",
            "ln -s /home/work/.local/lib/code-server/bin/code-server /home/work/.local/bin/code-server",
            "PATH=\"/home/work/.local/bin:$PATH\""
          ]
        },
        "ref": "pre_start_result"
      },
      {
        "action": "write_file",
        "args": {
          "filename": "/home/work/.config/code-server/config.yaml",
          "body": [
            "bind-addr: 127.0.0.1:{port}\n",
            "auth: password",
            "password: {password}",
            "cert: false"
          ]
        },
        "ref": "write_conf_file"
      }
    ],
    "command": ["/home/work/.local/bin/code-server"],
    "url_template": ""
}
